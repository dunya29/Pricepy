const allModals=document.querySelectorAll(".js-modal"),successModal=document.querySelector(".success-mod"),errorModal=document.querySelector(".error-mod");function openModal(e){$(e).fadeIn(500)}function closeModal(e){$(".js-modal").fadeOut(100)}function setSuccessTxt(e=!1,t=!1){successModal.querySelector(".modal__title span").textContent=e||"Заявка отправлена",t&&(successModal.querySelector(".modal__title p").textContent=t)}function setErrorTxt(e=!1,t=!1){errorModal.querySelector(".modal__title span").textContent=e||"Что-то пошло не так",t&&(errorModal.querySelector(".modal__title p").textContent=t)}function openSuccessMod(e=!1,t=!1){setSuccessTxt(e,t),openModal(successModal)}function openErrorMod(e=!1,t=!1){setErrorTxt(e,t),openModal(errorModal)}function formSuccess(e,t=!1,o=!1){e.querySelectorAll("input").forEach((e=>{e.classList.remove("has-error"),["hidden","checkbox","radio"].includes(e.type)||(e.value="")})),openSuccessMod(t,o)}const headermobBtn=document.querySelector(".header__mobBtn");headermobBtn&&(headermobBtn.addEventListener("click",(()=>document.querySelector(".header__phones").classList.add("open"))),document.querySelector(".header__phones-close").addEventListener("click",(()=>{document.querySelector(".header__phones").classList.remove("open")})));const fixedMenu=document.querySelector(".fixed-menu");function showFixedMenu(){window.innerWidth<=991&&window.innerHeight-document.querySelector(".footer").getBoundingClientRect().bottom<=0?fixedMenu.classList.remove("unshow"):fixedMenu.classList.add("unshow")}fixedMenu&&(showFixedMenu(),window.addEventListener("resize",showFixedMenu),window.addEventListener("scroll",showFixedMenu)),window.addEventListener("resize",(()=>{window.innerWidth>991.98&&document.querySelector(".burger").classList.contains("open")&&document.querySelector(".burger").click()}));const checkPhoneMod=document.querySelector(".check-phone");let codeResTimeout;function checkVal(){0==checkPhoneMod.querySelector(".check-phone__code").value.length?document.querySelector(".check-phone .request__btn").setAttribute("disabled",!0):document.querySelector(".check-phone .request__btn").removeAttribute("disabled"),checkPhoneMod.querySelector(".check-phone__code").addEventListener("input",checkVal)}function openCheckPhoneMod(e){clearTimeout(codeResTimeout),openModal(checkPhoneMod);let t=30;checkPhoneMod.querySelector(".modal__title span").textContent=`Получите код подтверждения на номер ${e}`,checkPhoneMod.querySelector(".check-phone__content").innerHTML='<button class="request__btn check-phone__send" type="button">Получить код</button>',checkPhoneMod.addEventListener("click",(e=>{if(checkPhoneMod.querySelector(".check-phone__send").contains(e.target)){t=30,clearTimeout(codeResTimeout),checkPhoneMod.querySelector(".check-phone__content").innerHTML=`\n            <div class="modal__lbl">Код подтверждения</div>\n\t\t\t<form action="" novalidate class="send-code">\n                <div class="item-form">\n                \t<input type="text" pattern="d*" maxlength="4" name="code" placeholder="0000" class="check-phone__code">\n                    <span data-error></span>\n                </div>\n\t\t\t\t<div class="modal__lbl check-phone__resend">Повторный запрос кода доступен через <span>${t}</span> сек.</div>\t\n\t\t\t\t<button class="request__btn send-code__submit" type="submit">подтвердить</button>\n\t\t\t</form>\n            `,checkPhoneMod.querySelector(".modal__title span").textContent="Выслали проверочный код на телефон",checkVal(),function e(){document.querySelector(".check-phone__resend span").textContent=t,t--,t>0?codeResTimeout=setTimeout(e,1e3):document.querySelector(".check-phone__resend").innerHTML='<button type="button" class="check-phone__resend check-phone__send">Отправить новый код</button>'}()}}))}